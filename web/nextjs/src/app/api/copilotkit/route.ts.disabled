import { CopilotRuntime, copilotRuntimeHandler } from "@copilotkit/runtime/nextjs";
import { CustomHttpAgent } from "@copilotkit/runtime";
import { getAiApiBaseUrl } from "@/core/config/aiApi";

const aguiBaseUrl =
  process.env.AG_UI_BASE_URL || getAiApiBaseUrl();

const runtime = new CopilotRuntime({
  agents: [
    {
      name: "agentic-research",
      description: "AIfolio AG-UI agent",
      agent: new CustomHttpAgent({
        url: `${aguiBaseUrl}/agui`,
      }),
    },
  ],
});

export const POST = copilotRuntimeHandler(runtime);
