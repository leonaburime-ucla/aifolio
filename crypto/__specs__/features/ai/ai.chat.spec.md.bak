# AI Chat Bar Spec

Version: 1.0.0
Status: Draft
Last updated: 2026-01-20

---

## Purpose

Provide a bottom-anchored chat bar (OpenAI/Claude style) that accepts user input, maintains input history, and submits messages through the AI orchestrator.

---

## UI Requirements

- 1.1.1 The chat bar is fixed to the bottom of the viewport.
- 1.1.2 No attachments, voice, or secondary controls besides the disabled plus button.
- 1.1.3 The plus button is greyed out and shows tooltip text "Disabled for now" on hover or click.
- 1.1.4 The input placeholder reads "Ask anything".
- 1.1.5 A Send button triggers submit.

---

## Interaction Requirements

- 1.2.1 Enter submits the current input.
- 1.2.2 Arrow Up cycles backward through input history.
- 1.2.3 Arrow Down cycles forward through input history and clears when past the newest entry.
- 1.2.4 Submitting an empty or whitespace-only message is ignored.

---

## Orchestrator Requirements

- 1.3.1 `chatOrchestrator.submitMessage(value)` trims input and ignores empty submissions.
- 1.3.2 `chatOrchestrator.submitMessage(value)` persists input history to state.
- 1.3.3 `chatOrchestrator.submitMessage(value)` appends the user message to chat state.
- 1.3.4 `chatOrchestrator.submitMessage(value)` sends the request to the AI (placeholder until API wired).
- 1.3.5 `chatOrchestrator.getHistoryValue(direction)` returns the next input value for the arrow key direction.
- 1.3.6 `chatOrchestrator.resetHistoryCursor()` clears input history navigation state.

---

## State Requirements

- 1.4.1 `inputHistory: string[]`
- 1.4.2 `historyCursor: number | null`
- 1.4.3 `messages: { id, role, content, createdAt }[]`
- 1.4.4 `isSending: boolean`

---

## Non-Goals

- File attachments
- Voice input
- Rich text formatting
- Message threading
